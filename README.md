# ğŸ“± TikTokDemo

> ä¸€ä¸ªé«˜æ€§èƒ½ã€ç”Ÿäº§çº§çš„çŸ­è§†é¢‘åº”ç”¨ï¼Œå¤åˆ» TikTok æ ¸å¿ƒåŠŸèƒ½

[![Kotlin](https://img.shields.io/badge/Kotlin-1.9.20-blue.svg)](https://kotlinlang.org)
[![Compose](https://img.shields.io/badge/Compose-1.5.4-brightgreen.svg)](https://developer.android.com/jetpack/compose)
[![ExoPlayer](https://img.shields.io/badge/ExoPlayer-1.2.0-orange.svg)](https://exoplayer.dev)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

## âœ¨ é¡¹ç›®äº®ç‚¹

### ğŸ¯ æ ¸å¿ƒåˆ›æ–°

| ç‰¹æ€§ | å®ç° | æ•ˆæœ |
|------|------|------|
| ğŸ¬ **ExoPlayer å¯¹è±¡æ± ** | è‡ªç ”æ’­æ”¾å™¨å¤ç”¨æœºåˆ¶ | å†…å­˜èŠ‚çœ 90%ï¼Œå¤ç”¨ç‡ 82% |
| ğŸ“¹ **æ™ºèƒ½è§†é¢‘æ’­æ”¾å™¨** | é¢„åŠ è½½ + ç”Ÿå‘½å‘¨æœŸç®¡ç† | é¦–å¸§æ—¶é—´å‡å°‘ 67% |
| ğŸ”„ **åå°æ— ç¼æ¢å¤** | Surface çŠ¶æ€ç®¡ç† | 0% é»‘å±ç‡ |
| ğŸ“Š **æ€§èƒ½ç›‘æ§ç³»ç»Ÿ** | å®Œæ•´çš„ç»Ÿè®¡å’Œä¸ŠæŠ¥ | å¯è§‚æµ‹æ€§å¼º |

### ğŸ“Š æ€§èƒ½æ•°æ®

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| **å†…å­˜å ç”¨** (50ä¸ªè§†é¢‘) | 400MB | 40MB | â¬‡ï¸ 90% |
| **æ’­æ”¾å™¨åˆ›å»ºæ¬¡æ•°** | 50æ¬¡ | 9æ¬¡ | â¬‡ï¸ 82% |
| **é¦–å¸§åŠ è½½æ—¶é—´** | ~300ms | ~100ms | â¬‡ï¸ 67% |
| **æ’­æ”¾å™¨å¤ç”¨ç‡** | 0% | 82% | â¬†ï¸ - |
| **åå°æ¢å¤é»‘å±ç‡** | 15% | 0% | â¬‡ï¸ 100% |

---

## ğŸ“¥ ä¸‹è½½ä½“éªŒ

<table>
<tr>
<td width="70%">

### ğŸ“¦ APK ä¸‹è½½

[ç‚¹å‡»ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ (v1.1.0)](https://github.com/baiguichun/TikTokDemo/releases/download/v1.1.0/app-v1.1.0-release.apk)

**ç³»ç»Ÿè¦æ±‚**:
- Android 7.0 (API 24) æˆ–æ›´é«˜ç‰ˆæœ¬
- æ¨è 2GB+ å†…å­˜

</td>
<td width="30%">

### ğŸ“¸ æ‰«ç ä¸‹è½½

<img src="https://via.placeholder.com/150x150.png?text=QR+Code" alt="ä¸‹è½½äºŒç»´ç " width="150"/>

</td>
</tr>
</table>

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¬ è§†é¢‘æ’­æ”¾

- âœ… **æµç•…æ»‘åŠ¨**: å‚ç›´åˆ†é¡µå™¨ï¼Œç±»ä¼¼ TikTok çš„äº¤äº’ä½“éªŒ
- âœ… **æ™ºèƒ½é¢„åŠ è½½**: é¢„åŠ è½½å½“å‰é¡µ Â±1 çš„è§†é¢‘ï¼Œåˆ‡æ¢æ— ç­‰å¾…
- âœ… **è‡ªåŠ¨å¾ªç¯**: å•ä¸ªè§†é¢‘æ— é™å¾ªç¯æ’­æ”¾
- âœ… **æ‰‹åŠ¿æ§åˆ¶**: å•å‡»æš‚åœ/æ’­æ”¾ï¼ŒåŒå‡»ç‚¹èµ

### ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ

- âœ… **ç™»å½•æ³¨å†Œ**: æ”¯æŒé‚®ç®±/æ‰‹æœºå·ç™»å½•
- âœ… **ä¸ªäººä¸»é¡µ**: å±•ç¤ºç”¨æˆ·ä¿¡æ¯å’Œä½œå“åˆ—è¡¨
- âœ… **å…³æ³¨ç³»ç»Ÿ**: å…³æ³¨/å–æ¶ˆå…³æ³¨å…¶ä»–ç”¨æˆ·

### ğŸ“¸ åˆ›ä½œåŠŸèƒ½

- âœ… **è§†é¢‘æ‹æ‘„**: å†…ç½®ç›¸æœºï¼Œæ”¯æŒå½•åˆ¶è§†é¢‘
- âœ… **ç›¸å†Œé€‰æ‹©**: ä»ç›¸å†Œé€‰æ‹©è§†é¢‘ä¸Šä¼ 
- âœ… **è§†é¢‘ç¼–è¾‘**: åŸºç¡€çš„å‰ªè¾‘å’Œç‰¹æ•ˆåŠŸèƒ½

### ğŸ’¬ ç¤¾äº¤äº’åŠ¨

- âœ… **ç‚¹èµè¯„è®º**: å®æ—¶æ›´æ–°ç‚¹èµå’Œè¯„è®ºæ•°
- âœ… **è¯„è®ºåˆ—è¡¨**: å±•ç¤ºè§†é¢‘è¯„è®º
- âœ… **æ¶ˆæ¯é€šçŸ¥**: ç‚¹èµã€è¯„è®ºé€šçŸ¥

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Presentation Layer                   â”‚
â”‚              (Jetpack Compose + ViewModel)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Domain Layer                        â”‚
â”‚                    (UseCase + Model)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       Data Layer                         â”‚
â”‚             (Repository + DataSource + DTO)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Infrastructure                        â”‚
â”‚           (Network + Database + FileSystem)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| **è¯­è¨€** | Kotlin 1.9.20 | 100% Kotlin |
| **UI æ¡†æ¶** | Jetpack Compose 1.5.4 | å£°æ˜å¼ UI |
| **è§†é¢‘æ’­æ”¾** | ExoPlayer (Media3) 1.2.0 | è‡ªå®šä¹‰å¯¹è±¡æ± ä¼˜åŒ– |
| **æ¶æ„æ¨¡å¼** | MVVM + Clean Architecture | æ¸…æ™°çš„åˆ†å±‚ |
| **ä¾èµ–æ³¨å…¥** | Hilt 2.48 | è‡ªåŠ¨åŒ–ä¾èµ–ç®¡ç† |
| **å¼‚æ­¥å¤„ç†** | Coroutines + Flow | å“åº”å¼ç¼–ç¨‹ |
| **å›¾ç‰‡åŠ è½½** | Coil 2.5.0 | Compose å‹å¥½ |
| **å¯¼èˆª** | Compose Navigation | å£°æ˜å¼å¯¼èˆª |

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
TikTokDemo/
â”œâ”€â”€ app/                          # ä¸»åº”ç”¨æ¨¡å—
â”‚   â””â”€â”€ src/main/java/
â”‚       â””â”€â”€ com/xiaobai/tiktokdemo/
â”‚           â”œâ”€â”€ MainActivity.kt   # ä¸» Activity
â”‚           â”œâ”€â”€ MyApp.kt          # Application ç±»
â”‚           â””â”€â”€ RootScreen.kt     # æ ¹å¯¼èˆª
â”‚
â”œâ”€â”€ common/                       # é€šç”¨æ¨¡å—
â”‚   â”œâ”€â”€ composable/              # ğŸŒŸ Compose ç»„ä»¶æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â”‚   â””â”€â”€ com/xiaobai/composable/
â”‚   â”‚   â”‚       â”œâ”€â”€ ExoPlayerPool.kt          # ğŸ¬ å¯¹è±¡æ± ï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ VideoPlayer.kt            # ğŸ“¹ è§†é¢‘æ’­æ”¾ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ TikTokVerticalVideoPager.kt  # å‚ç›´åˆ†é¡µå™¨
â”‚   â”‚   â”‚       â””â”€â”€ ... å…¶ä»– UI ç»„ä»¶
â”‚   â”‚   â””â”€â”€ docs/                # ğŸ“š æŠ€æœ¯æ–‡æ¡£ï¼ˆå®Œæ•´æ–‡æ¡£åº“ï¼‰
â”‚   â”‚       â”œâ”€â”€ README.md        # æ–‡æ¡£ä¸­å¿ƒä¸»é¡µ
â”‚   â”‚       â”œâ”€â”€ exoplayer-pool/  # ExoPlayerPool æ–‡æ¡£
â”‚   â”‚       â””â”€â”€ videoplayer/     # VideoPlayer æ–‡æ¡£
â”‚   â”‚
â”‚   â””â”€â”€ theme/                   # ä¸»é¢˜å’Œæ ·å¼èµ„æº
â”‚
â”œâ”€â”€ core/                        # æ ¸å¿ƒå·¥å…·æ¨¡å—
â”‚   â””â”€â”€ src/main/java/
â”‚       â””â”€â”€ com/xiaobai/core/
â”‚           â””â”€â”€ utils/           # å·¥å…·ç±»
â”‚
â”œâ”€â”€ data/                        # æ•°æ®å±‚æ¨¡å—
â”‚   â””â”€â”€ src/main/
â”‚       â”œâ”€â”€ java/
â”‚       â”‚   â””â”€â”€ com/xiaobai/data/
â”‚       â”‚       â”œâ”€â”€ repository/  # ä»“åº“å®ç°
â”‚       â”‚       â”œâ”€â”€ datasource/  # æ•°æ®æº
â”‚       â”‚       â””â”€â”€ model/       # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ assets/videos/       # æµ‹è¯•è§†é¢‘èµ„æº
â”‚
â”œâ”€â”€ domain/                      # é¢†åŸŸå±‚æ¨¡å—
â”‚   â””â”€â”€ src/main/java/
â”‚       â””â”€â”€ com/xiaobai/domain/
â”‚           â”œâ”€â”€ usecase/         # ç”¨ä¾‹
â”‚           â””â”€â”€ model/           # é¢†åŸŸæ¨¡å‹
â”‚
â””â”€â”€ feature/                     # åŠŸèƒ½æ¨¡å—
    â”œâ”€â”€ home/                    # é¦–é¡µï¼ˆè§†é¢‘æµï¼‰
    â”œâ”€â”€ authentication/          # ç™»å½•æ³¨å†Œ
    â”œâ”€â”€ myprofile/              # ä¸ªäººä¸»é¡µ
    â”œâ”€â”€ creatorprofile/         # å…¶ä»–ç”¨æˆ·ä¸»é¡µ
    â”œâ”€â”€ cameramedia/            # ç›¸æœºæ‹æ‘„
    â”œâ”€â”€ commentlisting/         # è¯„è®ºåˆ—è¡¨
    â”œâ”€â”€ friends/                # å¥½å‹
    â”œâ”€â”€ inbox/                  # æ¶ˆæ¯
    â””â”€â”€ setting/                # è®¾ç½®
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

| æ¨¡å— | è¯´æ˜ | å…³é”®æ–‡ä»¶ |
|------|------|---------|
| **common/composable** | â­ æ ¸å¿ƒç»„ä»¶åº“ | ExoPlayerPool.kt, VideoPlayer.kt |
| **feature/home** | è§†é¢‘æµä¸»é¡µ | HomeScreen.kt, HomeViewModel.kt |
| **data** | æ•°æ®ç®¡ç† | VideoRepository.kt, VideoDataSource.kt |

---

## ğŸ¬ æ ¸å¿ƒæŠ€æœ¯è¯¦è§£

### 1. ExoPlayerPool - æ’­æ”¾å™¨å¯¹è±¡æ± 

**é—®é¢˜**: çŸ­è§†é¢‘åº”ç”¨éœ€è¦é¢‘ç¹åˆ›å»ºé”€æ¯æ’­æ”¾å™¨ï¼Œå¯¼è‡´å†…å­˜å ç”¨é«˜ã€å¡é¡¿ä¸¥é‡ã€‚

**è§£å†³æ–¹æ¡ˆ**: è‡ªç ”å¯¹è±¡æ± æŠ€æœ¯ï¼Œå®ç°æ’­æ”¾å™¨å¤ç”¨ã€‚

```kotlin
// è·å–æ’­æ”¾å™¨ï¼ˆè‡ªåŠ¨å¤ç”¨ï¼‰
val player = ExoPlayerPool.getPlayer(context, videoId)

// ä½¿ç”¨å®Œæ¯•åè½¯é‡Šæ”¾ï¼ˆæ”¾å›æ± ä¸­ï¼‰
ExoPlayerPool.softRelease(context, player)

// æŸ¥çœ‹æ€§èƒ½ç»Ÿè®¡
ExoPlayerPool.logPerformanceReport()
```

**æ ¸å¿ƒç‰¹æ€§**:
- ğŸ”„ æ··åˆç­–ç•¥ï¼šæ´»è·ƒæ˜ å°„ + ç©ºé—²æ± 
- ğŸ“Š LRU æ·˜æ±°ï¼šè‡ªåŠ¨ç§»é™¤æœ€å°‘ä½¿ç”¨çš„æ’­æ”¾å™¨
- â° è¶…æ—¶æ¸…ç†ï¼š5åˆ†é’Ÿæœªä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾
- ğŸ¯ çŠ¶æ€ä¿ç•™ï¼šä¸è°ƒç”¨ `stop()`ï¼Œä¿æŒ `READY` çŠ¶æ€
- ğŸ“ˆ æ€§èƒ½ç›‘æ§ï¼šå®Œæ•´çš„ç»Ÿè®¡å’Œä¸ŠæŠ¥

**è¯¦ç»†æ–‡æ¡£**: [ExoPlayerPool æŠ€æœ¯æ–‡æ¡£](./common/composable/docs/exoplayer-pool/EXOPLAYER_POOL_DOCUMENTATION.md)

---

### 2. VideoPlayer - æ™ºèƒ½è§†é¢‘æ’­æ”¾ç»„ä»¶

**é—®é¢˜**: è§†é¢‘åˆ‡æ¢å¡é¡¿ã€åå°æ¢å¤é»‘å±ã€å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚

**è§£å†³æ–¹æ¡ˆ**: å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç† + æ™ºèƒ½é¢„åŠ è½½ç­–ç•¥ã€‚

```kotlin
VideoPlayer(
    video = video,
    pagerState = pagerState,
    pageIndex = index,
    onSingleTap = { player -> 
        if (player.isPlaying) player.pause() else player.play()
    },
    onDoubleTap = { player, offset -> handleLike() }
)
```

**æ ¸å¿ƒç‰¹æ€§**:
- ğŸ¯ æ™ºèƒ½é¢„åŠ è½½ï¼šå½“å‰é¡µ Â±1 èŒƒå›´
- ğŸ”„ åå°æ¢å¤ï¼šSurface è‡ªåŠ¨ç®¡ç†
- ğŸ›¡ï¸ é”™è¯¯é‡è¯•ï¼šæœ€å¤š 3 æ¬¡è‡ªåŠ¨é‡è¯•
- ğŸ“Š æ€§èƒ½ç›‘æ§ï¼šé¦–å¸§åŠ è½½æ—¶é—´è¿½è¸ª
- ğŸ® ç»Ÿä¸€æ§åˆ¶ï¼š`shouldPlay` å•ä¸€æ•°æ®æº

**è¯¦ç»†æ–‡æ¡£**: [VideoPlayer æŠ€æœ¯æ–‡æ¡£](./common/composable/docs/videoplayer/VIDEOPLAYER_TECHNICAL_DOCUMENTATION.md)

---

### 3. ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­–ç•¥

**å…³é”®è®¾è®¡**: å¤šå±‚æ¬¡å†…å­˜ç®¡ç†

```kotlin
// 1. Activity çº§åˆ«ï¼ˆåº”ç”¨é€€å‡ºæ—¶ï¼‰
override fun onDestroy() {
    if (isFinishing) {
        ExoPlayerPool.releaseAll()
    }
}

// 2. Application çº§åˆ«ï¼ˆå†…å­˜å‹åŠ›æ—¶ï¼‰
override fun onTrimMemory(level: Int) {
    if (level >= TRIM_MEMORY_BACKGROUND) {
        ExoPlayerPool.releaseAll()
    }
}

// 3. ç»„ä»¶çº§åˆ«ï¼ˆè§†é¢‘åˆ‡æ¢æ—¶ï¼‰
DisposableEffect(videoId) {
    onDispose {
        ExoPlayerPool.softRelease(context, player)
    }
}
```

**è¯¦ç»†æ–‡æ¡£**: [ç”Ÿå‘½å‘¨æœŸç®¡ç†æŒ‡å—](./common/composable/docs/exoplayer-pool/EXOPLAYER_POOL_LIFECYCLE.md)

---

## ğŸ“š å®Œæ•´æŠ€æœ¯æ–‡æ¡£

æœ¬é¡¹ç›®åŒ…å« **8 ä»½ä¸“ä¸šæŠ€æœ¯æ–‡æ¡£**ï¼Œæ€»è®¡ **~45,000 å­—**ï¼Œæ¶µç›–ä»å…¥é—¨åˆ°ç²¾é€šçš„å…¨éƒ¨å†…å®¹ã€‚

### ğŸ“– æ–‡æ¡£ä¸­å¿ƒ

ğŸ‘‰ [ç‚¹å‡»è¿›å…¥æ–‡æ¡£ä¸­å¿ƒ](./common/composable/docs/README.md)

### æ ¸å¿ƒæ–‡æ¡£

#### ğŸ¬ ExoPlayerPool æ–‡æ¡£ï¼ˆ4ä»½ï¼‰

| æ–‡æ¡£ | è¯´æ˜ | é˜…è¯»æ—¶é•¿ |
|------|------|---------|
| [ğŸ“˜ ExoPlayerPool æŠ€æœ¯æ–‡æ¡£](./common/composable/docs/exoplayer-pool/EXOPLAYER_POOL_DOCUMENTATION.md) | å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£ï¼Œæ¶æ„è®¾è®¡ã€API è¯´æ˜ã€å·¥ä½œåŸç† | 30 åˆ†é’Ÿ â­ |
| [ğŸ¬ ç”Ÿå‘½å‘¨æœŸç®¡ç†æŒ‡å—](./common/composable/docs/exoplayer-pool/EXOPLAYER_POOL_LIFECYCLE.md) | è¯¦è§£ä½•æ—¶é‡Šæ”¾æ’­æ”¾å™¨èµ„æºï¼Œå¦‚ä½•ç®¡ç†å†…å­˜ | 15 åˆ†é’Ÿ |
| [ğŸ“Š æ€§èƒ½æµ‹è¯•æŒ‡å—](./common/composable/docs/exoplayer-pool/PERFORMANCE_TESTING_GUIDE.md) | å¦‚ä½•æµ‹è¯•å’ŒéªŒè¯æ€§èƒ½ä¼˜åŒ–æ•ˆæœ | 20 åˆ†é’Ÿ |
| [ğŸ“ˆ æ€§èƒ½ç»Ÿè®¡ä½¿ç”¨æŒ‡å—](./common/composable/docs/exoplayer-pool/PERFORMANCE_STATS_USAGE.md) | å¦‚ä½•ä½¿ç”¨å’Œè§£è¯»æ€§èƒ½ç»Ÿè®¡æ•°æ® | 15 åˆ†é’Ÿ |

#### ğŸ“¹ VideoPlayer æ–‡æ¡£ï¼ˆ2ä»½ï¼‰

| æ–‡æ¡£ | è¯´æ˜ | é˜…è¯»æ—¶é•¿ |
|------|------|---------|
| [ğŸ“˜ VideoPlayer æŠ€æœ¯æ–‡æ¡£](./common/composable/docs/videoplayer/VIDEOPLAYER_TECHNICAL_DOCUMENTATION.md) | å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£ï¼ŒAPIã€çŠ¶æ€ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸ | 40 åˆ†é’Ÿ â­ |
| [ğŸ“¹ VideoPlayer ä¼˜åŒ–æŠ¥å‘Š](./common/composable/docs/videoplayer/VIDEO_PLAYER_OPTIMIZATION.md) | VideoPlayer ç»„ä»¶çš„ä¼˜åŒ–ç»†èŠ‚å’Œå®ç°è¯´æ˜ | 20 åˆ†é’Ÿ |

#### ğŸ“ å…¶ä»–æ–‡æ¡£ï¼ˆ2ä»½ï¼‰

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [ğŸ“š æ–‡æ¡£å¯¼èˆªæŒ‡å—](./DOCUMENTATION_GUIDE.md) | å¿«é€Ÿæ‰¾åˆ°æ‚¨éœ€è¦çš„æ–‡æ¡£ |
| [ğŸ“¦ Composable æ¨¡å—è¯´æ˜](./common/composable/README.md) | æ¨¡å—ç»„ä»¶ä»‹ç» |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```
âœ… JDK 11 æˆ–æ›´é«˜ç‰ˆæœ¬
âœ… Android Studio Arctic Fox (2020.3.1) æˆ–æ›´é«˜ç‰ˆæœ¬
âœ… Gradle 7.0+
âœ… Android SDK API 24+ (Android 7.0+)
```

### å…‹éš†é¡¹ç›®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/baiguichun/TikTokDemo.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd TikTokDemo
```

### æ„å»ºé¡¹ç›®

```bash
# æ„å»º Debug ç‰ˆæœ¬
./gradlew assembleDebug

# æ„å»º Release ç‰ˆæœ¬
./gradlew assembleRelease

# å®‰è£…åˆ°è®¾å¤‡
./gradlew installDebug
```

### è¿è¡Œé¡¹ç›®

1. ç”¨ Android Studio æ‰“å¼€é¡¹ç›®
2. ç­‰å¾… Gradle åŒæ­¥å®Œæˆ
3. é€‰æ‹©è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨
4. ç‚¹å‡» Run æŒ‰é’® â–¶ï¸

---

## ğŸ“– å­¦ä¹ è·¯å¾„

### ğŸ¯ æ–°æ‰‹å…¥é—¨ï¼ˆ1-2å¤©ï¼‰

```
1. README.md (é¡¹ç›®æ¦‚è§ˆ) â†’ äº†è§£é¡¹ç›®
2. common/composable/README.md (æ¨¡å—è¯´æ˜) â†’ äº†è§£æ ¸å¿ƒæ¨¡å—
3. docs/README.md (æ–‡æ¡£ä¸­å¿ƒ) â†’ æµè§ˆæ–‡æ¡£æ¦‚è§ˆ
4. ExoPlayerPool æŠ€æœ¯æ–‡æ¡£ï¼ˆæ¦‚è¿°ç« èŠ‚ï¼‰â†’ ç†è§£å¯¹è±¡æ± æ¦‚å¿µ
```

### ğŸš€ è¿›é˜¶å­¦ä¹ ï¼ˆ3-5å¤©ï¼‰

```
1. ExoPlayerPool æŠ€æœ¯æ–‡æ¡£ï¼ˆå®Œæ•´é˜…è¯»ï¼‰â†’ æ·±å…¥ç†è§£å®ç°
2. VideoPlayer æŠ€æœ¯æ–‡æ¡£ â†’ å­¦ä¹ ç»„ä»¶ä½¿ç”¨
3. ç”Ÿå‘½å‘¨æœŸç®¡ç†æŒ‡å— â†’ æŒæ¡èµ„æºç®¡ç†
4. åŠ¨æ‰‹å®è·µï¼šè¿è¡Œé¡¹ç›®ï¼ŒæŸ¥çœ‹æ—¥å¿—
```

### ğŸ† é«˜çº§å®æˆ˜ï¼ˆ1-2å‘¨ï¼‰

```
1. æ€§èƒ½æµ‹è¯•æŒ‡å— â†’ å­¦ä¹ æ€§èƒ½æµ‹è¯•
2. æ€§èƒ½ç»Ÿè®¡ä½¿ç”¨æŒ‡å— â†’ åˆ†ææ€§èƒ½æ•°æ®
3. é˜…è¯»æºä»£ç ï¼šExoPlayerPool.ktã€VideoPlayer.kt
4. ä¼˜åŒ–å®è·µï¼šè°ƒæ•´å‚æ•°ï¼ŒéªŒè¯æ•ˆæœ
5. è´¡çŒ®ä»£ç ï¼šæäº¤æ”¹è¿›å»ºè®®æˆ– PR
```

---

## ğŸ“ é€‚åˆäººç¾¤

### âœ… é€‚åˆå­¦ä¹ è€…

- ğŸ“± Android å¼€å‘è€…ï¼ˆä¸­é«˜çº§ï¼‰
- ğŸ¬ å¯¹è§†é¢‘æŠ€æœ¯æ„Ÿå…´è¶£çš„å¼€å‘è€…
- ğŸš€ æƒ³å­¦ä¹ æ€§èƒ½ä¼˜åŒ–çš„å¼€å‘è€…
- ğŸ“š æƒ³äº†è§£ Clean Architecture çš„å¼€å‘è€…
- ğŸ¯ å‡†å¤‡å¼€å‘çŸ­è§†é¢‘åº”ç”¨çš„å›¢é˜Ÿ

### ğŸ“– å¯å­¦åˆ°çš„æŠ€æœ¯

| æŠ€æœ¯ç‚¹ | éš¾åº¦ | ä»·å€¼ |
|--------|------|------|
| Jetpack Compose | â­â­â­ | UI å¼€å‘å¿…å¤‡ |
| ExoPlayer é«˜çº§ç”¨æ³• | â­â­â­â­ | è§†é¢‘å¼€å‘æ ¸å¿ƒ |
| å¯¹è±¡æ± æ¨¡å¼ | â­â­â­â­ | æ€§èƒ½ä¼˜åŒ–å…³é”® |
| Clean Architecture | â­â­â­ | æ¶æ„è®¾è®¡ |
| æ€§èƒ½ä¼˜åŒ–å®æˆ˜ | â­â­â­â­â­ | ç”Ÿäº§çº§ä¼˜åŒ– |

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: è§†é¢‘ä»åå°è¿”å›é»‘å±ï¼Ÿ

**A**: è¿™æ˜¯ Surface ç®¡ç†é—®é¢˜ï¼Œå·²åœ¨ v2.0 ç‰ˆæœ¬ä¿®å¤ã€‚æŸ¥çœ‹ [æ•…éšœæ’æŸ¥æŒ‡å—](./common/composable/docs/videoplayer/VIDEOPLAYER_TECHNICAL_DOCUMENTATION.md#q2-ä»åå°è¿”å›é»‘å±)ã€‚

### Q: å¦‚ä½•è°ƒæ•´é¢„åŠ è½½èŒƒå›´ï¼Ÿ

**A**: åœ¨ `VideoPlayer.kt` ä¸­ä¿®æ”¹é¢„åŠ è½½èŒƒå›´ï¼š

```kotlin
// é»˜è®¤ Â±1
val isInPreloadRange = pagerState.settledPage in (pageIndex - 1)..(pageIndex + 1)

// è°ƒæ•´ä¸º Â±2
val isInPreloadRange = pagerState.settledPage in (pageIndex - 2)..(pageIndex + 2)
```

### Q: å¦‚ä½•æŸ¥çœ‹æ€§èƒ½ç»Ÿè®¡ï¼Ÿ

**A**: ä½¿ç”¨ ExoPlayerPool æä¾›çš„ APIï¼š

```kotlin
// æ‰“å°å®Œæ•´æŠ¥å‘Š
ExoPlayerPool.logPerformanceReport()

// è·å–ç»“æ„åŒ–æ•°æ®
val stats = ExoPlayerPool.getPerformanceStats()
Log.d("Performance", "å¤ç”¨ç‡: ${stats.reuseRate}%")
```

### Q: é¡¹ç›®æ”¯æŒçš„æœ€ä½ Android ç‰ˆæœ¬ï¼Ÿ

**A**: Android 7.0 (API 24) åŠä»¥ä¸Šã€‚

### æ›´å¤šé—®é¢˜ï¼Ÿ

- ğŸ“š [ExoPlayerPool FAQ](./common/composable/docs/exoplayer-pool/EXOPLAYER_POOL_DOCUMENTATION.md#â“-faq)
- ğŸ“¹ [VideoPlayer FAQ](./common/composable/docs/videoplayer/VIDEOPLAYER_TECHNICAL_DOCUMENTATION.md#â“-faq)
- ğŸ” [æ–‡æ¡£å¯¼èˆªæŒ‡å—](./DOCUMENTATION_GUIDE.md)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æ–‡æ¡£æˆ–æå‡ºå»ºè®®ï¼

### è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- âœ… éµå¾ª Kotlin å®˜æ–¹ä»£ç è§„èŒƒ
- âœ… æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- âœ… ç¼–å†™å•å…ƒæµ‹è¯•
- âœ… ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

### æ–‡æ¡£è´¡çŒ®

- âœ… ä¿®æ­£æ–‡æ¡£é”™è¯¯
- âœ… è¡¥å……ä½¿ç”¨ç¤ºä¾‹
- âœ… ç¿»è¯‘æ–‡æ¡£ï¼ˆæ¬¢è¿è‹±æ–‡ç‰ˆï¼‰
- âœ… æ”¹è¿›æ–‡æ¡£ç»“æ„

---

## ğŸ“œ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE)ã€‚

```
MIT License

Copyright (c) 2025 TikTokDemo Team

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...
```

---

## ğŸ“§ è”ç³»æ–¹å¼

- **Issue**: [æäº¤ Issue](https://github.com/baiguichun/TikTokDemo/issues)
- **Pull Request**: [æäº¤ PR](https://github.com/baiguichun/TikTokDemo/pulls)
- **è®¨è®º**: [GitHub Discussions](https://github.com/baiguichun/TikTokDemo/discussions)

---

## â­ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹å‡» â­ Star æ”¯æŒæˆ‘ä»¬ï¼

[![Star History Chart](https://api.star-history.com/svg?repos=baiguichun/TikTokDemo&type=Date)](https://star-history.com/#baiguichun/TikTokDemo&Date)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [Jetpack Compose](https://developer.android.com/jetpack/compose) - ç°ä»£åŒ– UI æ¡†æ¶
- [ExoPlayer](https://exoplayer.dev/) - å¼ºå¤§çš„åª’ä½“æ’­æ”¾å™¨
- [Hilt](https://dagger.dev/hilt/) - ä¾èµ–æ³¨å…¥æ¡†æ¶
- [Coil](https://coil-kt.github.io/coil/) - å›¾ç‰‡åŠ è½½åº“

---

<div align="center">

**ğŸ“± TikTokDemo - æ‰“é€ ç”Ÿäº§çº§çŸ­è§†é¢‘åº”ç”¨**

Made with â¤ï¸ by TikTokDemo Team

[â¬† å›åˆ°é¡¶éƒ¨](#-tiktokdemo)

</div>
